<!DOCTYPE html>
<html lang="en">
<head>
    <!--
		
            Licensed under the Apache License v2.0
            http://www.apache.org/licenses/LICENSE-2.0

    -->
    <meta charset="utf-8">
    <title>Student Scoring Detail - Prototype</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A Teacher Student Scoring Dashboard.">
    <meta name="author" content="Summit">

    <!-- The styles -->
    <link id="bs-css" href="Content/bootstrap.css" rel="stylesheet">
    <link href="Content/bootstrap-responsive.css" rel="stylesheet">
    <!--<link href="Content/svtheme-app.css" rel="stylesheet">-->
    <link href="Content/site.css" rel="stylesheet">
    <link href="Content/jquery-ui.min.css" rel="stylesheet">
    <link href="Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet">
    <link href="Content/fullcalendar.css" rel="stylesheet">
    <link href="Content/fullcalendar.print.css" rel="stylesheet">
    <link href="Content/chosen.css" rel="stylesheet">
    <link href="Content/colorbox.css" rel="stylesheet">
    <link href="Content/jquery.cleditor.css" rel="stylesheet">
    <link href="Content/jquery.noty.css" rel="stylesheet">
    <link href="Content/noty_theme_default.css" rel="stylesheet">
    <link href="Content/elfinder.min.css" rel="stylesheet">
    <link href="Content/elfinder.theme.css" rel="stylesheet">
    <link href="Content/jquery.iphone.toggle.css" rel="stylesheet">
    <link href="Content/opa-icons.css" rel="stylesheet">
    <link href="Content/uploadify.css" rel="stylesheet">
    <link href="Content/jquery.dataTables.min.css" rel="stylesheet">

    <!-- The fav icon -->
    <link rel="shortcut icon" href="Images/favicon.png">

    <!-- Head.js to Load Scripts -->
    <script type="text/javascript" src="Scripts/head.min.js"> </script>

    <!-- ADD ALL SCRIPTS IN referenceScripts.js with head.js -->
    <script src="Scripts/DesktopReferenceScripts.js"> </script>

</head>
<body>
    <header>
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <a class="brand" href="/home/itemlist">
                    <img alt="AIR Logo" src="Images/Logo.png" />
                    <span>Student Scoring Detail - Prototype</span></a>

                <!-- user dropdown starts -->
                <div class="btn-group pull-right">
                    <a class="btn dropdown-toggle" href="TSS_StudentItemList.html">Home</a>
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="icon-user"></i><span class="hidden-phone">John Q. Teacher</span>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Profile</a></li>
                        <li class="divider"></li>
                        <li><a href="login.html">Logout</a></li>
                    </ul>
                </div>

            </div>
        </div>
        <!-- topbar / NavBar ends -->
    </header>


    <!-- Content  -->
    <div class="container-fluid margin-top">
        <div class="row-fluid">

            <noscript>
                <div class="alert alert-block span10">
                    <h4 class="alert-heading">Warning!</h4>
                    <p>You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a> enabled to use this site.</p>
                </div>
            </noscript>

            <div id="content" class="tss-content">
                <!-- content starts -->
                <div>
                    <table style="width: 100%;">
                        <tr>
                            <td>
                                <table>
                                    <tr>
                                        <td colspan="8">
                                            <h3>Item 103:
                                                <span>Insects Are Good for the Environment
                                                </span>
                                            </h3>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>Test:</th>
                                        <td>Grade 3 ELA</td>
                                        <td class="detailHeaderSpace">&nbsp;</td>
                                        <th>Session:</th>
                                        <td>CA12542</td>
                                        <td class="detailHeaderSpace">&nbsp;</td>
                                        <th>Student:</th>
                                        <td>John Smith</td>
                                    </tr>
                                </table>

                            </td>
                            <td>
                                <div class="btn-group">
                                    <a class="btn dropdown-toggle btn-standard" href="#" id="previousButton"><< Previous Response</a>
                                </div>
                            </td>
                            <td>
                                <div class="btn-group">
                                    <a class="btn dropdown-toggle btn-standard" href="#" id="nextButton">Next Response >></a>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <div id="tabs">
                        <table>
                            <tr>
                                <td>
                                    <ul>
                                        <li><a href="#tabs-1">Rubric</a></li>
                                    </ul>
                                </td>
                                <td class="tableSpace">&nbsp;</td>
                                <td>
                                    <a class="detailHeader" href="Exemplar.html">Exemplar</a>
                                </td>
                                <td class="tableSpace">&nbsp;</td>
                                <td>
                                    <a class="detailHeader" href="Training.html">Training Guides</a>
                                </td>
                            </tr>
                        </table>
                        <div id="tabs-1">
                            <table style="width: 100%;">
                                <tr>
                                    <td>
                                        <table id="rubricTable">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Scoring Criteria</th>
                                                    <th>Points</th>
                                                    <th>Score</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>The student provides at least two examples of beneficial insects</td>
                                                    <td>1</td>
                                                    <td>
                                                        <input type="number" id="Number1" value="1" /></td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>The student provides at least two examples of why the insects are good for the environment</td>
                                                    <td>2</td>
                                                    <td>
                                                        <input type="number" id="Number2" value="1" /></td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>The student presents arguments clearly and precisely</td>
                                                    <td>1</td>
                                                    <td>
                                                        <input type="number" id="Number3" value="0" /></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                    <td>
                                        <table>
                                            <tr>
                                                <th class="detailHeaderSpace">&nbsp;</th>
                                                <th>Condition Code</th>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td>
                                                    <p>
                                                        <select data-placeholder="Select Condition..." class="chosen-select" tabindex="1">
                                                            <option value=""></option>
                                                            <option>Off Topic</option>
                                                            <option>None</option>
                                                            <option>Nothing Written</option>
                                                            <option>Too Short</option>
                                                        </select>
                                                    </p>
                                                </td>
                                            </tr>
                                        </table>

                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="buttonSpace">
                    </div>
                    <h3>Response
                    </h3>
                    <iframe id="FrameData" src="/Sample/TSSFrame.html" style="width: 100%; height: 375px; border: 1px solid grey;"></iframe>
                    <div class="buttonSpace">
                    </div>
                    <div class="btn-group" style="text-align: center; width: 100%">
                        <div class="btn-group">
                            <a class="btn dropdown-toggle" href="#" id="SubmitScore">Submit Score</a>
                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <div class="btn-group">
                            <a class="btn dropdown-toggle" href="#" id="BackButton">Back</a>
                        </div>
                    </div>

                </div>
                <!-- content ends -->
            </div>
            <!--/#content.span10-->
        </div>
        <!--/fluid-row-->

        <footer>
            <div class="navbar-fixed-bottom">
                <p class="pull-left">&copy; <a href="http://www.air.org" target="_blank">AIR</a> 2014</p>
            </div>
        </footer>

    </div>
    <!--/.fluid-container-->


</body>
</html>

<script type="text/javascript">
    //jQuery().ready(function () {

    //jQuery.ajaxSetup({ async: false });

    alert("Data Loading...");

    //alert("2");

    //alert("3\n" + myStudents);

    var prevRecordId = -2
    var nextRecordId = -2

    $(document).ready(function () {


        $('#rubricTable').dataTable({
            //"scrollY": "400px",
            //"scrollCollapse": true,
            "paging": false,
            "ordering": false,
            "info": false,
            "searching": false,
            "columnDefs": [
                {
                    "targets": [0],
                    "visible": false,
                    "searchable": false
                }

            ]
        });

        $("#tabs").tabs({
            heightStyle: "auto"
        });

        $('.chosen-select').chosen({});


        //Get the ID from the URL
        var recordId = $.url().param('id');
        var bankId = $.url().param('bankid');

        //alert("queryStringID:" + queryStringID);

        //Set the FrameData Source
        $('#FrameData').attr("src", "/Sample/TSSFrame.html?id=" + recordId + "&bankid=" + bankId);

        ResolveNavigation(recordId);



        $("#SubmitScore").click(function () {

            //Check that cookie is there:
            var currentIds = $.cookie("currentIds");
            alert("currentIds: " + currentIds);

            var currentId = $.cookie("currentId");
            alert("currentId: " + currentId);


        });

        //BackButton
        $("#BackButton").click(function () {

            window.open("/TSS_StudentItemList.html");
            event.preventDefault();
        });

        //Previous Clicked
        $("#previousButton").click(function () {
            $('#FrameData').attr("src", "/Sample/TSSFrame.html?id=" + prevRecordId + "&bankid=" + bankId);
            ResolveNavigation(prevRecordId);
        });

        //Next Clicked 
        $("#nextButton").click(function () {
            $('#FrameData').attr("src", "/Sample/TSSFrame.html?id=" + nextRecordId + "&bankid=" + bankId);
            ResolveNavigation(nextRecordId);
        });


    });

    function ResolveNavigation(recordId) {

        var currentIds = $.cookie("currentIds");
        //alert(currentIds);
        var currentIdArray = currentIds.split('|');
        prevRecordId = recordId - 1;
        nextRecordId = recordId + 1;

        //These IDs are in a specific order. Find the ones before and after the current recordId.
        for (var i = 0; i < currentIdArray.length; i++) {
            if (currentIdArray[i] == recordId) {
                if (i > 0)
                    prevRecordId = currentIdArray[i - 1];
                else
                    prevRecordId = -1;

                if (i == currentIdArray.length - 1)
                    nextRecordId = -1;
                else
                    nextRecordId = currentIdArray[i + 1];
            }
        }

        //Put the current ID into a Cookie
        $.cookie("currentId", recordId);

        //Show prev and next
        //alert("Prev: " + prevRecordId + " - Next: " + nextRecordId);

        ResolveButton(prevRecordId, "#previousButton");
        ResolveButton(nextRecordId, "#nextButton");

    }


    //If prev or next is -1, then disable appropriate button.
    function ResolveButton(buttonRecordId, buttonName) {
        if (buttonRecordId == -1) {
            $(buttonName).attr("disabled", true);
        } else {
            $(buttonName).removeAttr("disabled");
        }
    }

</script>
